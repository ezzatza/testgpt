function clearContent(){document.getElementById("chatbox").innerHTML=""}const url=new URL(window.location.href),key=url.searchParams.get("key");key&&($("#apiKey").val(key),$("#apiKey").hide());const chatbox=$("#chatbox"),userInput=$("#userInput"),sendButton=$("#sendButton");let messages=[];function fetchMessages(){const apiKey="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";var settings={url:"https://api.openai.com/v1/chat/completions",method:"POST",timeout:0,headers:{Authorization:"Bearer "+apiKey,"Content-Type":"application/json"},data:JSON.stringify({model:"gpt-3.5-turbo",messages:messages})};$.ajax(settings).done((function(response){const message=response.choices[0].message;messages.push({role:message.role,content:message.content});const htmlText=window.markdownit().render(message.content),botMessageHtml='<pre><div class="message left-side" id="'+CryptoJS.MD5(htmlText)+'">'+htmlText+'</div><i class="far fa-clipboard ml-1 btn btn-outline-dark" id="'+CryptoJS.MD5(htmlText)+'-copy"></i></pre>';chatbox.append(botMessageHtml);var copyIcon=document.getElementById(CryptoJS.MD5(htmlText)+"-copy"),copyText=document.getElementById(CryptoJS.MD5(htmlText));copyIcon.addEventListener("click",(function(){var tempTextarea=document.createElement("textarea");tempTextarea.value=copyText.textContent,document.body.appendChild(tempTextarea),tempTextarea.select(),document.execCommand("copy"),document.body.removeChild(tempTextarea);var copyPopup=document.getElementById("copy-popup");copyPopup.style.display="block",setTimeout((function(){copyPopup.style.display="none"}),1e3)})),chatbox.animate({scrollTop:2e7},"slow"),sendButton.val("SUBMIT"),sendButton.prop("disabled",!1)})).fail((function(jqXHR,textStatus,errorThrown){sendButton.val("Error");let errorText,errorMessage='<pre><div class="message left-side  text-danger" >'+("Error: "+jqXHR.responseJSON.error.message)+"</div></pre>";chatbox.append(errorMessage),chatbox.animate({scrollTop:2e7},"slow")}))}sendButton.on("click",()=>{const message=userInput.val();if(message){messages.push({role:"user",content:message});const displaytext=window.markdownit().render(message);let userMessageHtml='<pre><div class="message right-side "  >'+displaytext+"</div></pre>";chatbox.append(userMessageHtml),chatbox.animate({scrollTop:2e7},"slow"),userInput.val(""),sendButton.val("Generating Response..."),sendButton.prop("disabled",!0),fetchMessages()}}),userInput.on("keydown",event=>{if(13!==event.keyCode||event.ctrlKey||event.shiftKey){if(13===event.keyCode&&(event.ctrlKey||event.shiftKey)){event.preventDefault();const cursorPosition=userInput.prop("selectionStart"),currentValue=userInput.val();userInput.val(currentValue.slice(0,cursorPosition)+"\n"+currentValue.slice(cursorPosition)),userInput.prop("selectionStart",cursorPosition+1),userInput.prop("selectionEnd",cursorPosition+1)}}else event.preventDefault(),sendButton.click()});